(this.webpackJsonpmitekScienceSDK=this.webpackJsonpmitekScienceSDK||[]).push([[4],{104:function(e,r,o){"use strict";o.r(r);var t=o(277),n=o.n(t),a=o(2);function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o={GLOBAL:{minimumImageSize:450,maximumDefaultImageSize:1920,maximumDefaultDocumentImageSize:4096},DL_BACK:{fourCornerThreshold:750},DL_FRONT:{fourCornerThreshold:!0===r||Object(a.c)()?750:500,lowContrastThreshold:0,busyBackgroundThreshold:600,glareThreshold:500,focusThreshold:!0===r||Object(a.c)()?300:150,exposureThreshold:320,horizontalFillThreshold:400,minPaddingThreshold:7,skewAngleThreshold:99},PASSPORT:{fourCornerThreshold:!0===r||Object(a.c)()?300:250,glareThreshold:500,focusThreshold:!0===r||Object(a.c)()?300:150,exposureThreshold:320,mrzThreshold:600,horizontalFillThreshold:400,minPaddingThreshold:7,skewAngleThreshold:200}};return Object(a.b)(o[e])?o[e]:"all"===e?o:""}var i=o(188),l=o.n(i);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{},t=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),t.forEach(function(r){d(e,r,o[r])})}return e}function d(e,r,o){return r in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o,e}o.d(r,"processFrame",function(){return S}),o.d(r,"default",function(){return A});var g={ranOnce:!1},h=new n.a,f={documentType:10,imageData:null,detectFourCorners:!0,detectGlare:!0,detectFocus:!0,detectExposure:!0,enableLogging:!1},m=!1,T=5,y=0,R=0,O={},p=null,_={},S=function(e){g=c({},g,e,{imageData:null});var r=u(e.documentType),o=e.top?{guideWindowT:e.top||120,guideWindowL:e.left||320,guideWindowB:e.top+e.gh||450,guideWindowR:e.left+e.gw||975}:{},t={DL_FRONT:10,DL_BACK:100,PDF417_BARCODE:70,PASSPORT:70};t[e.documentType],f.detectMRZ=void 0!==s(e.captureMode)&&"AUTO_CAPTURE"===e.captureMode&&"PASSPORT"===e.documentType;var n=c({},o,f,r,{documentType:t[e.documentType]||null,imageData:e.imageData});O={_x:n.guideWindowL,_y:n.guideWindowT,width:n.guideWindowR-n.guideWindowL,height:n.guideWindowB-n.guideWindowT},h.postMessage(n)};h.onmessage=function e(r){var o,t,a=r.data;if(!0===m&&a.hasOwnProperty("imageData")){var i=c({},a,{imageData:null,documentType:g.documentType}),s=u(g.documentType),d="DL_BACK"===g.documentType?function(e){return arguments.length>1&&void 0!==arguments[1]?arguments[1]:u("GLOBAL"),e.fourCornerScore>=500?{status:"success"}:{status:"failure",code:"NB",key:"CV_NO_BARCODE_FOUND",score:e.fourCornerScore}}(i,s):function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u("GLOBAL"),o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(e.fourCornerScore<r.fourCornerThreshold)return{status:"failure",code:"NF",key:"MITEK_ERROR_FOUR_CORNER",score:e.fourCornerScore};if(e.exposureScore<r.exposureThreshold)return{status:"failure",code:"BF",key:"MITEK_ERROR_TOO_DARK",score:e.exposureScore};if(e.focusScore<r.focusThreshold)return{status:"failure",code:"SF",key:"MITEK_ERROR_FOCUS",score:e.focusScore};if(e.glareScore<r.glareThreshold)return{status:"failure",code:"GF",key:"MITEK_ERROR_GLARE",score:e.glareScore};if("string"==typeof o&&"AUTO_CAPTURE"!==o){if(void 0!==e.minPadding&&e.minPadding<r.minPaddingThreshold)return{status:"failure",code:"MP",key:"MITEK_ERROR_MIN_PADDING",score:e.minPadding};if(void 0!==e.horizontalFill&&e.horizontalFill<r.horizontalFillThreshold)return{status:"failure",code:"HF",key:"MITEK_ERROR_HORIZONTAL_FILL",score:e.horizontalFill};if(void 0!==e.skewAngle&&e.skewAngle>r.skewAngleThreshold)return{status:"failure",code:"QS",key:"MITEK_ERROR_SKEW_ANGLE",score:e.skewAngle};if(void 0!==e.lowContrastConfidence&&e.lowContrastConfidence<r.lowContrastThreshold)return{status:"failure",code:"LC",key:"MITEK_ERROR_LOW_CONTRAST",score:e.lowContrastConfidence};if(void 0!==e.busyBackground&&e.busyBackground<r.busyBackgroundThreshold)return{status:"failure",code:"BB",key:"MITEK_ERROR_BUSY_BACKGROUND",score:e.busyBackground}}return{status:"success"}}(i,s,g.mode||null);"AUTO_CAPTURE"===g.mode&&(d=c({},d,function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u("GLOBAL");if(arguments.length>2&&void 0!==arguments[2]&&arguments[2],void 0!==e.mrzScore&&e.mrzScore<r.mrzThreshold)return{status:"failure",code:"MZ",key:"MITEK_ERROR_MRZ_MISSING",score:e.mrzScore}}(i,s,g.mode||null)));var f=(t={imageData:(o=i).imageData,fourCornerA:{x:o.ax,y:o.ay},fourCornerB:{x:o.bx,y:o.by},fourCornerC:{x:o.cx,y:o.cy},fourCornerD:{x:o.dx,y:o.dy}},o.glareTop>0&&o.glareBottom>0&&o.glareLeft>0&&o.glareRight>0&&(t.glareTop=o.glareTop,t.glareBottom=o.glareBottom,t.glareLeft=o.glareLeft,t.glareRight=o.glareRight),t);if("AUTO_CAPTURE"===g.mode&&"success"===d.status){var S=function(e,r){l.a.Fast.THRESHOLD=T,C.width=e.width,C.height=e.height,w.putImageData(e,0,0);var o=w.getImageData(r._x,r._y,r.width,r.height),t=l.a.Image.grayscale(o.data,o.width,o.height);return l.a.Fast.findCorners(t,o.width,o.height).length}(a.imageData,O);y++,S>R&&(R=S,_=f,p=a.imageData),y>=5?(f=_,a.imageData=p):d.status="failure"}var A=c({warnings:d},f,{imageData:"success"===d.status||"AUTO_CAPTURE"!==g.mode?a.imageData:null});"PROCESS_FRAME"!==g.mode&&"MANUAL_CAPTURE"!==g.mode||(h=null,(h=new n.a).onmessage=e),g.resultCallback(A)}'{"mitekWorkerStatus": "ready"}'==a&&(m=!0)};var C=document.createElement("canvas"),w=C.getContext("2d");function A(e){var r=null;return g=c({},e,{ranOnce:!0}),new Promise(function(e,o){y=0,R=0,_={},r=setInterval(function(){!0===m&&(clearInterval(r),e({msg:"ready"}))},50)})}},277:function(e,r,o){e.exports=function(){return new Worker(o.p+"1ea3339247e580707a07.worker.js")}}}]);